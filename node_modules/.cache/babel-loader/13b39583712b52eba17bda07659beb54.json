{"ast":null,"code":"var _jsxFileName = \"/Users/Aaron/Development/event-project/events-frontend/src/components/event.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nexport default class Event extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      tickets: [],\n      new_ticket_class: '',\n      new_description: '',\n      new_availability: '',\n      new_price: '',\n      update: false\n    };\n\n    this.fetchAllTikcets = () => {\n      const id = this.props.id;\n      const token = localStorage.getItem(\"access_token\");\n      axios.get(\"http://localhost:3000/events/\".concat(id, \"/tickets\"), {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => {\n        this.setState({\n          tickets: res.data\n        });\n      });\n    };\n\n    this.handlechange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.addNew = e => {\n      const id = this.props.id;\n      e.preventDefault();\n      const _this$state = this.state,\n            new_ticket_class = _this$state.new_ticket_class,\n            new_description = _this$state.new_description,\n            new_availability = _this$state.new_availability,\n            new_price = _this$state.new_price;\n      const token = localStorage.getItem(\"access_token\");\n      const self = this;\n      axios({\n        method: 'post',\n        url: \"http://localhost:3000/events/\".concat(id, \"/tickets\"),\n        data: {\n          ticket_class: new_ticket_class,\n          description: new_description,\n          availability: new_availability,\n          price: new_price\n        },\n        headers: {\n          'Authorization': token\n        }\n      }).then(function (response) {\n        self.setState({\n          new_ticket_class: '',\n          new_description: '',\n          new_availability: '',\n          new_price: ''\n        });\n        self.fetchAllTikcets();\n      });\n    };\n\n    this.updateState = (e, id) => {\n      e.preventDefault();\n      const tickets = this.state.tickets;\n      const filterResult = tickets.filter(ticket => ticket.id === id);\n      this.setState({\n        new_price: filterResult[0].price,\n        new_availability: filterResult[0].availability,\n        new_description: filterResult[0].description,\n        new_ticket_class: filterResult[0].ticket_class,\n        update: true,\n        updateTicketId: filterResult[0].id\n      });\n    };\n\n    this.updateTikcet = e => {\n      e.preventDefault();\n      const _this$state2 = this.state,\n            new_ticket_class = _this$state2.new_ticket_class,\n            new_description = _this$state2.new_description,\n            new_availability = _this$state2.new_availability,\n            new_price = _this$state2.new_price,\n            updateTicketId = _this$state2.updateTicketId;\n      const token = localStorage.getItem(\"access_token\");\n      const self = this;\n      axios({\n        method: 'put',\n        url: \"http://localhost:3000/tickets/\".concat(updateTicketId),\n        data: {\n          ticket_class: new_ticket_class,\n          description: new_description,\n          availability: new_availability,\n          price: new_price\n        },\n        headers: {\n          'Authorization': token\n        }\n      }).then(function (response) {\n        self.setState({\n          new_ticket_class: '',\n          new_description: '',\n          new_availability: '',\n          new_price: '',\n          update: false\n        });\n        self.fetchAllTikcets();\n      });\n    };\n\n    this.deleteTicket = (e, id) => {\n      console.log(\"12\");\n      e.preventDefault();\n      const token = localStorage.getItem(\"access_token\");\n      axios.delete(\"http://localhost:3000/tickets/\".concat(id), {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => {});\n      window.location.reload();\n    };\n\n    this.cancelUpdate = () => {\n      this.setState({\n        new_price: '',\n        new_availability: '',\n        new_description: '',\n        new_ticket_class: '',\n        update: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchAllTikcets();\n  }\n\n  render() {\n    const _this$props = this.props,\n          name = _this$props.name,\n          description = _this$props.description,\n          id = _this$props.id,\n          location = _this$props.location,\n          isEdit = _this$props.isEdit;\n    const _this$state3 = this.state,\n          new_ticket_class = _this$state3.new_ticket_class,\n          new_description = _this$state3.new_description,\n          new_availability = _this$state3.new_availability,\n          new_price = _this$state3.new_price,\n          update = _this$state3.update;\n    const tickets = this.state.tickets;\n    console.log(tickets);\n    return React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, name), React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"card-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Location: \", location), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, description), React.createElement(Link, {\n      className: \"btn btn-outline-success\",\n      to: {\n        pathname: \"/eventDetail/\".concat(id)\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"View detail\"), isEdit && React.createElement(\"button\", {\n      style: {\n        margin: '1rem'\n      },\n      className: \"btn btn-outline-success\",\n      onClick: e => this.props.updateState(e, id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Edit\"), isEdit && React.createElement(React.Fragment, null, React.createElement(\"button\", {\n      className: \"btn btn-outline-success\",\n      onClick: e => this.props.deleteEvent(e, id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Delete\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), \"Tickets\", tickets && tickets.map(ticket => {\n      return React.createElement(\"div\", {\n        class: \"p-3 mb-2 bg-secondary text-white\",\n        style: {\n          margin: \"1rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Ticket class: \", ticket.ticket_class, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }), \"Ticket description: \", ticket.description, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), \"Ticket availability: \", ticket.availability, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), \"Ticket price: \", ticket.price, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        style: {\n          margin: \"1rem\"\n        },\n        className: \"btn btn-bg-info\",\n        onClick: e => this.updateState(e, ticket.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Edit\"), React.createElement(\"button\", {\n        className: \"btn btn-bg-info\",\n        onClick: e => this.deleteTicket(e, ticket.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Delete\"));\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), !update ? React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Add new\") : React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Ticket Class\",\n      name: \"new_ticket_class\",\n      value: new_ticket_class,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Description\",\n      name: \"new_description\",\n      value: new_description,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Availablilty\",\n      name: \"new_availability\",\n      value: new_availability,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Price\",\n      name: \"new_price\",\n      value: new_price,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }))))), !update ? React.createElement(\"button\", {\n      className: \"btn btn-outline-primary\",\n      onClick: this.addNew,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Add\") : React.createElement(React.Fragment, null, React.createElement(\"button\", {\n      style: {\n        margin: \"1rem\"\n      },\n      className: \"btn btn-outline-primary\",\n      onClick: this.updateTikcet,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"button\", {\n      className: \"btn btn-outline-primary\",\n      onClick: this.cancelUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Cancel\")))));\n  }\n\n}","map":{"version":3,"sources":["/Users/Aaron/Development/event-project/events-frontend/src/components/event.js"],"names":["React","Component","Link","axios","Event","state","tickets","new_ticket_class","new_description","new_availability","new_price","update","fetchAllTikcets","id","props","token","localStorage","getItem","get","headers","Authorization","then","res","setState","data","handlechange","e","target","name","value","addNew","preventDefault","self","method","url","ticket_class","description","availability","price","response","updateState","filterResult","filter","ticket","updateTicketId","updateTikcet","deleteTicket","console","log","delete","window","location","reload","cancelUpdate","componentDidMount","render","isEdit","pathname","margin","deleteEvent","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\n\nexport default class Event extends Component {\n\n  state = {\n    tickets: [],\n    new_ticket_class: '',\n    new_description: '',\n    new_availability: '',\n    new_price: '',\n    update: false\n  }\n  componentDidMount(){\n    this.fetchAllTikcets();\n  }\n\n  fetchAllTikcets = () => {\n    const { id } = this.props;\n    const token = localStorage.getItem(\"access_token\");\n    axios.get(`http://localhost:3000/events/${id}/tickets`, { headers: {Authorization: token }  })\n    .then(res => {\n      this.setState({\n        tickets: res.data\n      });\n    })\n  }\n\n  handlechange = (e) => {\n    this.setState({ [e.target.name] : e.target.value});\n  }\n\n  addNew = (e) => {\n    const { id } = this.props;\n    e.preventDefault();\n    const { new_ticket_class, new_description, new_availability, new_price} = this.state;  \n    const token = localStorage.getItem(\"access_token\");\n    const self = this\n    axios({\n      method: 'post',\n      url: `http://localhost:3000/events/${id}/tickets`,\n      data: {\n        ticket_class: new_ticket_class,\n        description: new_description,\n        availability: new_availability,\n        price: new_price,\n      },\n      headers: {'Authorization': token}\n    })\n      .then(function (response) {\n        self.setState({\n          new_ticket_class: '',\n          new_description: '',\n          new_availability: '',\n          new_price: ''\n        })\n        self.fetchAllTikcets();\n      });\n  } \n\n  updateState = (e, id) => {\n    e.preventDefault();\n    const { tickets} = this.state;\n    const filterResult = tickets.filter(ticket => ticket.id === id);\n    this.setState({\n      new_price: filterResult[0].price,\n      new_availability: filterResult[0].availability,\n      new_description: filterResult[0].description,\n      new_ticket_class: filterResult[0].ticket_class,\n      update: true,\n      updateTicketId: filterResult[0].id\n    })\n  }\n\n  updateTikcet = (e) =>{\n    e.preventDefault();\n    const { new_ticket_class, new_description, new_availability, new_price, updateTicketId} = this.state;  \n    const token = localStorage.getItem(\"access_token\");\n    const self = this\n    axios({\n      method: 'put',\n      url: `http://localhost:3000/tickets/${updateTicketId}`,\n      data: {\n        ticket_class: new_ticket_class,\n        description: new_description,\n        availability: new_availability,\n        price: new_price,\n      },\n      headers: {'Authorization': token}\n    })\n      .then(function (response) {\n        self.setState({\n          new_ticket_class: '',\n          new_description: '',\n          new_availability: '',\n          new_price: '',\n          update: false,\n        })\n        self.fetchAllTikcets();\n      });\n  }\n\n  deleteTicket = (e, id) => {\n    console.log(\"12\")\n    e.preventDefault();\n    const token = localStorage.getItem(\"access_token\");\n    axios.delete(`http://localhost:3000/tickets/${id}`, { headers: {Authorization: token }  })\n    .then(res => {\n    })\n    window.location.reload();\n  }\n\n  cancelUpdate = () => {\n    this.setState({\n      new_price: '',\n      new_availability: '',\n      new_description: '',\n      new_ticket_class: '',\n      update: false\n    })\n  }\n  render() {\n    const { name, description, id, location, isEdit } = this.props;\n    const { new_ticket_class, new_description, new_availability, new_price, update} = this.state;\n\n    const { tickets} = this.state;\n    console.log(tickets);\n    return (\n\n        <div className=\"card\">\n        <div className=\"card-header\">\n          {name}\n        </div>\n        <div className=\"card-body\">\n          <h5 className=\"card-title\">Location: {location}</h5>\n          <p className=\"card-text\">{description}</p>\n          <Link className=\"btn btn-outline-success\"  to={{\n            pathname: `/eventDetail/${id}`\n          }}>\n          \n          View detail</Link>\n          { isEdit && <button style={{margin: '1rem'}} className=\"btn btn-outline-success\" onClick={ (e) => this.props.updateState(e,id)}>Edit</button>}\n          { isEdit && (\n          <>\n          <button className=\"btn btn-outline-success\" onClick={ (e) => this.props.deleteEvent(e,id)}>Delete</button>\n          <br/>\n          <hr/>\n          Tickets\n          { tickets && (\n            tickets.map(ticket => {\n              return (\n                <div class=\"p-3 mb-2 bg-secondary text-white\" style={{margin: \"1rem\"}}>\n                  Ticket class: {ticket.ticket_class}\n                  <br/>\n                  Ticket description: {ticket.description}\n                  <br/>\n                  Ticket availability: {ticket.availability}\n                  <br/>                  \n                  Ticket price: {ticket.price}\n                  <br/>\n                  <button style={{margin: \"1rem\"}} className=\"btn btn-bg-info\" onClick={(e) => this.updateState(e,ticket.id)}>Edit</button>\n                  <button className=\"btn btn-bg-info\" onClick={ (e) => this.deleteTicket(e,ticket.id)}>Delete</button>\n                </div>\n\n              )\n            })\n          )}\n\n          <hr/>\n          {!update ? <h6>Add new</h6>: <h6>Update</h6>} \n          <div className=\"container\">\n            <div className=\"row\">\n              <div className=\"col\">\n                <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Ticket Class\" name=\"new_ticket_class\" value={new_ticket_class} onChange={ this.handlechange }/>\n                </div>\n              </div>\n              <div className=\"col\"> <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Description\" name=\"new_description\" value={new_description} onChange={ this.handlechange }/>\n                </div></div>\n              <div className=\"w-100\"></div>\n              <div className=\"col\"> <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Availablilty\" name=\"new_availability\" value={new_availability} onChange={ this.handlechange }/>\n                </div></div>\n              <div className=\"col\"> <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Price\" name=\"new_price\" value={new_price} onChange={ this.handlechange }/>\n                </div></div>\n            </div>\n          </div>\n          { !update ? <button className=\"btn btn-outline-primary\" onClick={this.addNew}>Add</button> :  (\n            <>\n            <button style={{margin: \"1rem\"}} className=\"btn btn-outline-primary\" onClick={this.updateTikcet}>Update</button>\n            <button className=\"btn btn-outline-primary\" onClick={this.cancelUpdate}>Cancel</button>\n\n            </>\n          )}\n          </>\n          )}\n        </div>\n        </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}