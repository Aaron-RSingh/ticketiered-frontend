{"ast":null,"code":"var _jsxFileName = \"/Users/Aaron/Development/event-project/events-frontend/src/components/profile.js\";\nimport React, { Component } from 'react';\nimport Navbar from './navbar';\nimport { navigate } from \"@reach/router\";\nimport axios from 'axios';\nimport Event from './event';\nexport default class Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      events: [],\n      name: '',\n      description: '',\n      image_url: '',\n      date_time: '',\n      location: '',\n      update: false,\n      user: {},\n      ticketCounter: 0,\n      tickets: {}\n    };\n\n    this.fetchMyEvents = () => {\n      const token = localStorage.getItem(\"access_token\");\n      axios.get('http://localhost:3000/events', {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.setState({\n          events: res.data\n        }, () => {\n          this.getUser();\n        });\n      });\n    };\n\n    this.handlechange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.getUser = () => {\n      const token = localStorage.getItem(\"access_token\");\n      axios.get(\"http://localhost:3000/user-info\", {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.setState({\n          user: res.data\n        });\n      });\n    };\n\n    this.createNewEvent = e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            name = _this$state.name,\n            description = _this$state.description,\n            date_time = _this$state.date_time,\n            location = _this$state.location,\n            image_url = _this$state.image_url;\n      console.log(name, description, date_time, location, image_url);\n      const token = localStorage.getItem(\"access_token\");\n      console.log(token);\n      const self = this;\n      axios({\n        method: 'post',\n        url: 'http://localhost:3000/events',\n        data: {\n          name: name,\n          description: description,\n          location: location,\n          date_time: date_time,\n          image_url: image_url\n        },\n        headers: {\n          'Authorization': token\n        }\n      }).then(function (response) {\n        self.setState({\n          name: '',\n          description: '',\n          image_url: '',\n          date_time: '',\n          location: ''\n        });\n        self.fetchMyEvents();\n      });\n    };\n\n    this.logout = e => {\n      e.preventDefault();\n      localStorage.removeItem(\"access_token\");\n      this.props.history.push('/login');\n    };\n\n    this.deleteEvent = (e, id) => {\n      console.log(\"12\");\n      e.preventDefault();\n      const token = localStorage.getItem(\"access_token\");\n      axios.delete(\"http://localhost:3000/events/\".concat(id), {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => {});\n      window.location.reload();\n    };\n\n    this.updateState = (e, id) => {\n      const events = this.state.events;\n      console.log(events);\n      const filterEvent = events.filter(event => event.id === id);\n      const updateEvent = filterEvent[0];\n      this.setState({\n        name: updateEvent.name,\n        location: updateEvent.location,\n        description: updateEvent.description,\n        image_url: updateEvent.image_url,\n        date_time: updateEvent.date_time,\n        update: true,\n        updateEventId: id\n      });\n    };\n\n    this.updateEvent = e => {\n      e.preventDefault();\n      const self = this;\n      const _this$state2 = this.state,\n            name = _this$state2.name,\n            location = _this$state2.location,\n            description = _this$state2.description,\n            image_url = _this$state2.image_url,\n            date_time = _this$state2.date_time,\n            updateEventId = _this$state2.updateEventId;\n      const token = localStorage.getItem(\"access_token\");\n      axios({\n        method: 'put',\n        url: \"http://localhost:3000/events/\".concat(updateEventId),\n        data: {\n          name: name,\n          description: description,\n          location: location,\n          date_time: date_time,\n          image_url: image_url\n        },\n        headers: {\n          'Authorization': token\n        }\n      }).then(function (response) {\n        self.setState({\n          name: '',\n          description: '',\n          image_url: '',\n          date_time: '',\n          location: '',\n          update: false\n        });\n        self.fetchMyEvents();\n      });\n    };\n\n    this.cancelUpdate = () => {\n      this.setState({\n        name: '',\n        description: '',\n        image_url: '',\n        date_time: '',\n        location: '',\n        update: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"access_token\");\n\n    if (!token) {\n      this.props.history.push('/login');\n    } else {\n      this.fetchMyEvents();\n    }\n  }\n\n  render() {\n    const _this$state3 = this.state,\n          events = _this$state3.events,\n          name = _this$state3.name,\n          description = _this$state3.description,\n          date_time = _this$state3.date_time,\n          location = _this$state3.location,\n          image_url = _this$state3.image_url,\n          update = _this$state3.update,\n          user = _this$state3.user;\n    let myEvents = [];\n    myEvents = events.map((event, key) => React.createElement(React.Fragment, null, React.createElement(Event, {\n      name: event.name,\n      location: event.location,\n      description: event.description,\n      id: event.id,\n      isEdit: true,\n      deleteEvent: this.deleteEvent,\n      updateState: this.updateState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    })));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      logout: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Welcome! \", user && user.username), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, user && user.primary_location), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"My events\"), myEvents ? myEvents : React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"No event yet\")), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, !update ? React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Create new one\") : React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Update form\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Name\",\n      name: \"name\",\n      value: name,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Location\",\n      name: \"location\",\n      value: location,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Time-date\",\n      name: \"date_time\",\n      value: date_time,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Description\",\n      name: \"description\",\n      value: description,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Image Url\",\n      name: \"image_url\",\n      value: image_url,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    })), !update ? React.createElement(\"button\", {\n      className: \"btn btn-outline-success\",\n      onClick: this.createNewEvent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Create\") : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-outline-success\",\n      style: {\n        margin: '1rem'\n      },\n      onClick: this.updateEvent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"button\", {\n      className: \"btn btn-outline-success\",\n      onClick: this.cancelUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"cancel\")))), React.createElement(\"div\", {\n      className: \"col-sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    })))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/Aaron/Development/event-project/events-frontend/src/components/profile.js"],"names":["React","Component","Navbar","navigate","axios","Event","Profile","state","events","name","description","image_url","date_time","location","update","user","ticketCounter","tickets","fetchMyEvents","token","localStorage","getItem","get","headers","Authorization","then","res","console","log","data","setState","getUser","handlechange","e","target","value","createNewEvent","preventDefault","self","method","url","response","logout","removeItem","props","history","push","deleteEvent","id","delete","window","reload","updateState","filterEvent","filter","event","updateEvent","updateEventId","cancelUpdate","componentDidMount","render","myEvents","map","key","username","primary_location","margin"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Navbar from './navbar'\nimport { navigate } from \"@reach/router\"\nimport axios from 'axios';\nimport Event from './event'\n\nexport default class Profile extends Component {\n  state = {\n    events: [],\n    name: '',\n    description: '',\n    image_url: '',\n    date_time: '',\n    location: '',\n    update: false,\n    user: {},\n    ticketCounter: 0,\n    tickets: {}\n  }\n  componentDidMount(){\n    const token = localStorage.getItem(\"access_token\");\n    if(!token){\n      this.props.history.push('/login')\n    } else {\n      this.fetchMyEvents();\n    }\n  }\n\n  fetchMyEvents = () => {\n    const token = localStorage.getItem(\"access_token\");\n\n    axios.get('http://localhost:3000/events', { headers: {Authorization: token}  })\n    .then(res => {\n      console.log(res.data)\n      this.setState({\n        events: res.data\n      }, () => {\n        this.getUser();\n      })\n    })\n  }\n\n  handlechange = (e) => {\n    this.setState({ [e.target.name] : e.target.value});\n  }\n\n  getUser = () => {\n    const token = localStorage.getItem(\"access_token\");\n    axios.get(`http://localhost:3000/user-info`, { headers: {Authorization: token}  })\n    .then(res => {\n      console.log(res.data);\n      this.setState({\n        user: res.data\n      })\n    })\n  }\n  \n  createNewEvent = (e) => {\n    e.preventDefault();\n    const {  name, description, date_time, location, image_url } = this.state;\n    console.log(name, description, date_time, location, image_url)    \n    const token = localStorage.getItem(\"access_token\");\n    console.log(token)\n    const self = this\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/events',\n      data: {\n        name: name,\n        description: description,\n        location: location,\n        date_time: date_time,\n        image_url: image_url\n      },\n      headers: {'Authorization': token}\n    })\n      .then(function (response) {\n        self.setState({\n          name: '',\n          description: '',\n          image_url: '',\n          date_time: '',\n          location: ''\n        })\n        self.fetchMyEvents();\n      });\n  }\n\n  logout = (e) => {\n    e.preventDefault();\n    localStorage.removeItem(\"access_token\");\n    this.props.history.push('/login')\n  }\n\n\n  deleteEvent = (e, id) =>  {\n    console.log(\"12\")\n    e.preventDefault();\n    const token = localStorage.getItem(\"access_token\");\n    axios.delete(`http://localhost:3000/events/${id}`, { headers: {Authorization: token }  })\n    .then(res => {\n    })\n    window.location.reload();\n  }\n\n\n  updateState = (e, id) => {\n    const {events} = this.state;\n    console.log(events)\n    const filterEvent = events.filter(event => event.id === id);\n    const updateEvent = filterEvent[0];\n    this.setState({\n      name: updateEvent.name,\n      location: updateEvent.location,\n      description: updateEvent.description,\n      image_url: updateEvent.image_url,\n      date_time: updateEvent.date_time,\n      update: true,\n      updateEventId: id\n    })\n  }\n\n  updateEvent = (e) => {\n    e.preventDefault();\n    const self = this\n    const {name, location, description, image_url, date_time, updateEventId} = this.state;\n    const token = localStorage.getItem(\"access_token\");\n    axios({\n      method: 'put',\n      url: `http://localhost:3000/events/${updateEventId}`,\n      data: {\n        name: name,\n        description: description,\n        location: location,\n        date_time: date_time,\n        image_url: image_url\n      },\n      headers: {'Authorization': token}\n    })\n      .then(function (response) {\n        self.setState({\n          name: '',\n          description: '',\n          image_url: '',\n          date_time: '',\n          location: '',\n          update: false\n        })\n        self.fetchMyEvents();\n      });\n  }\n\n  cancelUpdate = () => {\n    this.setState({\n      name: '',\n      description: '',\n      image_url: '',\n      date_time: '',\n      location: '',\n      update: false\n    })\n  }\n  render() {\n    const { events, name, description, date_time, location, image_url, update, user } = this.state;\n    let myEvents = []\n    myEvents  = events.map((event, key) =>\n    <>\n    <Event name={event.name} location={event.location} description={event.description} id={event.id} isEdit={true} deleteEvent={ this.deleteEvent} updateState={this.updateState}/>\n    <br/>\n    </>)\n    return (\n      <div>\n        <Navbar logout={this.logout}/>\n        <br/>   \n        <br/>   \n        \n        <div className=\"container\">\n        <h2>Welcome! {user && user.username}</h2>\n        <p>{user && user.primary_location}</p>\n        <hr/>\n        <br/>   \n        <br/>  \n        \n          <div className=\"row\">\n            <div className=\"col\">\n            <h3>My events</h3>\n              {myEvents ? myEvents: <h3>No event yet</h3>}\n            </div>\n            <div className=\"col\">\n            <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col\">\n          {!update ? <h3>Create new one</h3>: <h3>Update form</h3>}\n          <br/>\n            <form>\n              <div className=\"form-group\">\n                <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Name\" name=\"name\" value={name} onChange={ this.handlechange }/>\n              </div>\n              <div className=\"form-group\">\n                <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Location\" name=\"location\" value={location} onChange={ this.handlechange }/>\n              </div>\n              <div className=\"form-group\">\n                <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Time-date\" name=\"date_time\" value={date_time} onChange={ this.handlechange }/>\n              </div>\n              <div className=\"form-group\">\n                <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Description\" name=\"description\" value={description} onChange={ this.handlechange }/>\n              </div>\n              <div className=\"form-group\">\n                <input type=\"text\" className=\"form-control\"  aria-describedby=\"emailHelp\" placeholder=\"Image Url\" name=\"image_url\" value={image_url} onChange={ this.handlechange }/>\n              </div>\n              {!update ? \n              \n              <button  className=\"btn btn-outline-success\" onClick={this.createNewEvent}>Create</button> :\n              (<span>\n                 <button  className=\"btn btn-outline-success\" style={{margin: '1rem'\n                 }}onClick={this.updateEvent}>Update</button>\n              <button  className=\"btn btn-outline-success\" onClick={this.cancelUpdate}>cancel</button>\n              </span> )              \n            }\n            </form>\n          </div>\n          <div className=\"col-sm\">\n          </div>\n        </div>\n      </div>\n            </div>\n          </div>\n        </div>    \n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}