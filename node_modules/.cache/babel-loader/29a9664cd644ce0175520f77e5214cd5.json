{"ast":null,"code":"var _jsxFileName = \"/Users/Aaron/final-project-ticketiered/ticketiered-frontend/src/components/event.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nexport default class Event extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      event: {},\n      tickets: [],\n      new_ticket_class: \"\",\n      new_description: \"\",\n      new_availability: \"\",\n      new_price: \"\",\n      update: false,\n      date_time: \"\"\n    };\n\n    this.fetchAllEventInfo = id => {\n      const token = localStorage.getItem(\"access_token\");\n      fetch(\"http://localhost:3000/events/\".concat(id), {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => res.json()).then(res => {\n        this.setState({\n          event: res.event\n        });\n      });\n    };\n\n    this.editDatesInState = () => {// debugger\n      // console.log(this.props.date_time.split(\"T\")[0]);\n      // const date = this.props.date_time.split(\"T\")[0];\n      // console.log(this.state);\n      // this.setState({\n      //   date_time: date\n      // });\n      // console.log(this.state);\n      // const {date_time} = this.props.events\n      // this.setState({})\n    };\n\n    this.handlechange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.addNew = e => {\n      const id = this.props.id;\n      e.preventDefault();\n      const _this$state = this.state,\n            new_ticket_class = _this$state.new_ticket_class,\n            new_description = _this$state.new_description,\n            new_availability = _this$state.new_availability,\n            new_price = _this$state.new_price;\n      const token = localStorage.getItem(\"access_token\");\n      const self = this;\n      fetch(\"http://localhost:3000/events/\".concat(id, \"/tickets\"), {\n        method: \"post\",\n        body: JSON.stringify({\n          ticket_class: new_ticket_class,\n          description: new_description,\n          availability: new_availability,\n          price: new_price\n        }),\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => res.json()).then(function (response) {\n        self.setState({\n          new_ticket_class: \"\",\n          new_description: \"\",\n          new_availability: \"\",\n          new_price: \"\"\n        });\n        self.fetchAllEventInfo(id);\n      });\n    };\n\n    this.updateState = (e, id) => {\n      e.preventDefault();\n      const event = this.state.event;\n      const filterResult = event.tickets.filter(ticket => ticket.id === id);\n      this.setState({\n        new_price: filterResult[0].price,\n        new_availability: filterResult[0].availability,\n        new_description: filterResult[0].description,\n        new_ticket_class: filterResult[0].ticket_class,\n        update: true,\n        updateTicketId: filterResult[0].id\n      });\n    };\n\n    this.updateTicket = e => {\n      e.preventDefault();\n      const _this$state2 = this.state,\n            new_ticket_class = _this$state2.new_ticket_class,\n            new_description = _this$state2.new_description,\n            new_availability = _this$state2.new_availability,\n            new_price = _this$state2.new_price,\n            updateTicketId = _this$state2.updateTicketId;\n      const token = localStorage.getItem(\"access_token\");\n      const self = this;\n      fetch(\"http://localhost:3000/tickets/\".concat(updateTicketId), {\n        method: \"PUT\",\n        body: JSON.stringify({\n          ticket_class: new_ticket_class,\n          description: new_description,\n          availability: new_availability,\n          price: new_price\n        }),\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => res.json()).then(function (res) {\n        self.setState({\n          new_ticket_class: \"\",\n          new_description: \"\",\n          new_availability: \"\",\n          new_price: \"\",\n          update: false\n        });\n        self.fetchAllEventInfo(res.event_id);\n      });\n    };\n\n    this.deleteTicket = (e, id) => {\n      e.preventDefault();\n      const token = localStorage.getItem(\"access_token\");\n      fetch(\"http://localhost:3000/tickets/\".concat(id), {\n        method: \"DELETE\",\n        headers: {\n          Authorization: token,\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => res.json()).then(res => {});\n      window.location.reload();\n    };\n\n    this.cancelUpdate = () => {\n      this.setState({\n        new_price: \"\",\n        new_availability: \"\",\n        new_description: \"\",\n        new_ticket_class: \"\",\n        update: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    const eventId = this.props.id;\n    this.fetchAllEventInfo(eventId);\n    this.editDatesInState();\n  }\n\n  render() {\n    console.log(this.state);\n    const _this$props = this.props,\n          name = _this$props.name,\n          image_url = _this$props.image_url,\n          description = _this$props.description,\n          id = _this$props.id,\n          location = _this$props.location,\n          isEdit = _this$props.isEdit,\n          date_time = _this$props.date_time;\n    const _this$state3 = this.state,\n          new_ticket_class = _this$state3.new_ticket_class,\n          new_description = _this$state3.new_description,\n          new_availability = _this$state3.new_availability,\n          new_price = _this$state3.new_price,\n          update = _this$state3.update;\n    const event = this.state.event;\n    return React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, name), React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: event.image_url,\n      key: id,\n      alt: \"\",\n      style: {\n        width: \"25vw\",\n        height: \"25vw\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"h6\", {\n      className: \"card-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Location: \", location), React.createElement(\"p\", {\n      className: \"card-date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Date: Tomorrow\"), React.createElement(\"p\", {\n      className: \"card-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, description), React.createElement(Link, {\n      className: \"btn btn-outline-success\",\n      to: {\n        pathname: \"/eventDetail/\".concat(id)\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"View Details\"), isEdit && React.createElement(\"button\", {\n      style: {\n        margin: \"1rem\"\n      },\n      className: \"btn btn-outline-success my-2 my-sm-0\",\n      onClick: e => this.props.updateState(e, id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Edit\"), isEdit && React.createElement(React.Fragment, null, React.createElement(\"button\", {\n      className: \"btn btn-outline-success my-2 my-sm-0\",\n      onClick: e => this.props.deleteEvent(e, id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Delete\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Tickets\"), event.tickets && event.tickets.map(ticket => {\n      return React.createElement(\"div\", {\n        className: \"card p-6 mb-2 bg-secondary text-white\",\n        style: {\n          margin: \"1rem\"\n        },\n        key: ticket.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }), \"Ticket class: \", ticket.ticket_class, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), \"Ticket description: \", ticket.description, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), \"Ticket availability: \", ticket.availability, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }), \"Ticket price: \\xA3\", ticket.price, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        style: {\n          margin: \"1rem\"\n        },\n        className: \"btn btn-outline-success\",\n        onClick: e => this.updateState(e, ticket.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Edit\"), React.createElement(\"button\", {\n        className: \"btn btn-outline-success\",\n        onClick: e => this.deleteTicket(e, ticket.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Delete\"));\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }), !update ? React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"Add New Ticket\") : React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Ticket Class\",\n      name: \"new_ticket_class\",\n      value: new_ticket_class,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Description\",\n      name: \"new_description\",\n      value: new_description,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"w-100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Availablilty\",\n      name: \"new_availability\",\n      value: new_availability,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, \" \", React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Price\",\n      name: \"new_price\",\n      value: new_price,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }))))), !update ? React.createElement(\"button\", {\n      className: \"btn btn-outline-primary\",\n      onClick: this.addNew,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, \"Add\") : React.createElement(React.Fragment, null, React.createElement(\"button\", {\n      style: {\n        margin: \"1rem\"\n      },\n      className: \"btn btn-outline-primary\",\n      onClick: this.updateTicket,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"button\", {\n      className: \"btn btn-outline-primary\",\n      onClick: this.cancelUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, \"Cancel\"))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/Aaron/final-project-ticketiered/ticketiered-frontend/src/components/event.js"],"names":["React","Component","Link","Event","state","event","tickets","new_ticket_class","new_description","new_availability","new_price","update","date_time","fetchAllEventInfo","id","token","localStorage","getItem","fetch","headers","Authorization","then","res","json","setState","editDatesInState","handlechange","e","target","name","value","addNew","props","preventDefault","self","method","body","JSON","stringify","ticket_class","description","availability","price","response","updateState","filterResult","filter","ticket","updateTicketId","updateTicket","event_id","deleteTicket","window","location","reload","cancelUpdate","componentDidMount","eventId","render","console","log","image_url","isEdit","width","height","pathname","margin","deleteEvent","map"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default class Event extends Component {\n  state = {\n    event: {},\n    tickets: [],\n    new_ticket_class: \"\",\n    new_description: \"\",\n    new_availability: \"\",\n    new_price: \"\",\n    update: false,\n    date_time: \"\"\n  };\n  componentDidMount() {\n    const eventId = this.props.id;\n    this.fetchAllEventInfo(eventId);\n    this.editDatesInState();\n  }\n\n  fetchAllEventInfo = id => {\n    const token = localStorage.getItem(\"access_token\");\n    fetch(`http://localhost:3000/events/${id}`, {\n      headers: { Authorization: token }\n    })\n      .then(res => res.json())\n      .then(res => {\n        this.setState({\n          event: res.event\n        });\n      });\n  };\n\n  editDatesInState = () => {\n    // debugger\n    // console.log(this.props.date_time.split(\"T\")[0]);\n    // const date = this.props.date_time.split(\"T\")[0];\n    // console.log(this.state);\n    // this.setState({\n    //   date_time: date\n    // });\n    // console.log(this.state);\n    // const {date_time} = this.props.events\n    // this.setState({})\n  };\n\n  handlechange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  addNew = e => {\n    const { id } = this.props;\n    e.preventDefault();\n    const {\n      new_ticket_class,\n      new_description,\n      new_availability,\n      new_price\n    } = this.state;\n    const token = localStorage.getItem(\"access_token\");\n    const self = this;\n    fetch(`http://localhost:3000/events/${id}/tickets`, {\n      method: \"post\",\n      body: JSON.stringify({\n        ticket_class: new_ticket_class,\n        description: new_description,\n        availability: new_availability,\n        price: new_price\n      }),\n      headers: { Authorization: token, \"Content-Type\": \"application/json\" }\n    })\n      .then(res => res.json())\n      .then(function(response) {\n        self.setState({\n          new_ticket_class: \"\",\n          new_description: \"\",\n          new_availability: \"\",\n          new_price: \"\"\n        });\n        self.fetchAllEventInfo(id);\n      });\n  };\n\n  updateState = (e, id) => {\n    e.preventDefault();\n    const { event } = this.state;\n    const filterResult = event.tickets.filter(ticket => ticket.id === id);\n    this.setState({\n      new_price: filterResult[0].price,\n      new_availability: filterResult[0].availability,\n      new_description: filterResult[0].description,\n      new_ticket_class: filterResult[0].ticket_class,\n      update: true,\n      updateTicketId: filterResult[0].id\n    });\n  };\n\n  updateTicket = e => {\n    e.preventDefault();\n    const {\n      new_ticket_class,\n      new_description,\n      new_availability,\n      new_price,\n      updateTicketId\n    } = this.state;\n    const token = localStorage.getItem(\"access_token\");\n    const self = this;\n    fetch(`http://localhost:3000/tickets/${updateTicketId}`, {\n      method: \"PUT\",\n      body: JSON.stringify({\n        ticket_class: new_ticket_class,\n        description: new_description,\n        availability: new_availability,\n        price: new_price\n      }),\n      headers: { Authorization: token, \"Content-Type\": \"application/json\" }\n    })\n      .then(res => res.json())\n      .then(function(res) {\n        self.setState({\n          new_ticket_class: \"\",\n          new_description: \"\",\n          new_availability: \"\",\n          new_price: \"\",\n          update: false\n        });\n        self.fetchAllEventInfo(res.event_id);\n      });\n  };\n\n  deleteTicket = (e, id) => {\n    e.preventDefault();\n    const token = localStorage.getItem(\"access_token\");\n    fetch(`http://localhost:3000/tickets/${id}`, {\n      method: \"DELETE\",\n      headers: { Authorization: token, \"Content-Type\": \"application/json\" }\n    })\n      .then(res => res.json())\n      .then(res => {});\n    window.location.reload();\n  };\n\n  cancelUpdate = () => {\n    this.setState({\n      new_price: \"\",\n      new_availability: \"\",\n      new_description: \"\",\n      new_ticket_class: \"\",\n      update: false\n    });\n  };\n\n  render() {\n    console.log(this.state);\n    const {\n      name,\n      image_url,\n      description,\n      id,\n      location,\n      isEdit,\n      date_time\n    } = this.props;\n\n    const {\n      new_ticket_class,\n      new_description,\n      new_availability,\n      new_price,\n      update\n      // date_time\n    } = this.state;\n    const { event } = this.state;\n\n    return (\n      <div className=\"card\">\n        <div className=\"card-header\">{name}</div>\n        <div className=\"card-body\">\n          <img\n            src={event.image_url}\n            key={id}\n            alt=\"\"\n            style={{ width: \"25vw\", height: \"25vw\" }}\n          />\n          <h6 className=\"card-title\">Location: {location}</h6>\n          <p className=\"card-date\">Date: Tomorrow</p>\n          <p className=\"card-text\">{description}</p>\n          <Link\n            className=\"btn btn-outline-success\"\n            to={{ pathname: `/eventDetail/${id}` }}\n          >\n            View Details\n          </Link>\n          {isEdit && (\n            <button\n              style={{ margin: \"1rem\" }}\n              className=\"btn btn-outline-success my-2 my-sm-0\"\n              onClick={e => this.props.updateState(e, id)}\n            >\n              Edit\n            </button>\n          )}\n          {isEdit && (\n            <>\n              <button\n                className=\"btn btn-outline-success my-2 my-sm-0\"\n                onClick={e => this.props.deleteEvent(e, id)}\n              >\n                Delete\n              </button>\n              <br />\n              <hr />\n              <h6>Tickets</h6>\n              {event.tickets &&\n                event.tickets.map(ticket => {\n                  return (\n                    <div\n                      className=\"card p-6 mb-2 bg-secondary text-white\"\n                      style={{ margin: \"1rem\" }}\n                      key={ticket.id}\n                    >\n                      <div></div>Ticket class: {ticket.ticket_class}\n                      <br />\n                      Ticket description: {ticket.description}\n                      <br />\n                      Ticket availability: {ticket.availability}\n                      <br />\n                      Ticket price: £{ticket.price}\n                      <br />\n                      <button\n                        style={{ margin: \"1rem\" }}\n                        className=\"btn btn-outline-success\"\n                        onClick={e => this.updateState(e, ticket.id)}\n                      >\n                        Edit\n                      </button>\n                      <button\n                        className=\"btn btn-outline-success\"\n                        onClick={e => this.deleteTicket(e, ticket.id)}\n                      >\n                        Delete\n                      </button>\n                    </div>\n                  );\n                })}\n              <hr />\n              {!update ? <h6>Add New Ticket</h6> : <h6>Update</h6>}\n              <div className=\"container\">\n                <div className=\"row\">\n                  <div className=\"col\">\n                    <div className=\"form-group\">\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        aria-describedby=\"emailHelp\"\n                        placeholder=\"Ticket Class\"\n                        name=\"new_ticket_class\"\n                        value={new_ticket_class}\n                        onChange={this.handlechange}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"col\">\n                    {\" \"}\n                    <div className=\"form-group\">\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        aria-describedby=\"emailHelp\"\n                        placeholder=\"Description\"\n                        name=\"new_description\"\n                        value={new_description}\n                        onChange={this.handlechange}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"w-100\"></div>\n                  <div className=\"col\">\n                    {\" \"}\n                    <div className=\"form-group\">\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        aria-describedby=\"emailHelp\"\n                        placeholder=\"Availablilty\"\n                        name=\"new_availability\"\n                        value={new_availability}\n                        onChange={this.handlechange}\n                      />\n                    </div>\n                  </div>\n                  <div className=\"col\">\n                    {\" \"}\n                    <div className=\"form-group\">\n                      <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        aria-describedby=\"emailHelp\"\n                        placeholder=\"Price\"\n                        name=\"new_price\"\n                        value={new_price}\n                        onChange={this.handlechange}\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              {!update ? (\n                <button\n                  className=\"btn btn-outline-primary\"\n                  onClick={this.addNew}\n                >\n                  Add\n                </button>\n              ) : (\n                <>\n                  <button\n                    style={{ margin: \"1rem\" }}\n                    className=\"btn btn-outline-primary\"\n                    onClick={this.updateTicket}\n                  >\n                    Update\n                  </button>\n                  <button\n                    className=\"btn btn-outline-primary\"\n                    onClick={this.cancelUpdate}\n                  >\n                    Cancel\n                  </button>\n                </>\n              )}\n            </>\n          )}\n          <br />\n          <br />\n          <br />\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}