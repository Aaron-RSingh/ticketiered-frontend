{"ast":null,"code":"var _jsxFileName = \"/Users/Aaron/Development/event-project/events-frontend/src/components/profile.js\";\nimport React, { Component } from \"react\";\nimport Navbar from \"./navbar\";\nimport { navigate } from \"@reach/router\";\nimport axios from \"axios\";\nimport Event from \"./event\";\nexport default class Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      events: [],\n      name: \"\",\n      description: \"\",\n      image_url: \"\",\n      date_time: \"\",\n      location: \"\",\n      update: false,\n      user: {},\n      ticketCounter: 0,\n      tickets: {}\n    };\n\n    this.fetchMyEvents = () => {\n      const token = localStorage.getItem(\"access_token\");\n      fetch(\"http://localhost:3000/events\", {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => res.json()).then(res => {\n        console.log(res);\n        this.setState({\n          events: res\n        }, () => {\n          this.getUser();\n        });\n      });\n    };\n\n    this.handlechange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.getUser = () => {\n      const token = localStorage.getItem(\"access_token\");\n      fetch(\"http://localhost:3000/user-info\", {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => res.json()).then(res => {\n        console.log(res);\n        this.setState({\n          user: res\n        });\n      });\n    };\n\n    this.createNewEvent = e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            name = _this$state.name,\n            description = _this$state.description,\n            date_time = _this$state.date_time,\n            location = _this$state.location,\n            image_url = _this$state.image_url;\n      console.log(name, description, date_time, location, image_url);\n      const token = localStorage.getItem(\"access_token\");\n      console.log(token);\n      const self = this;\n      fetch(\"http://localhost:3000/events\", {\n        method: \"POST\",\n        body: {\n          name: name,\n          description: description,\n          location: location,\n          date_time: date_time,\n          image_url: image_url\n        },\n        headers: {\n          Authorization: token\n        }\n      }).then(function (response) {\n        self.setState({\n          name: \"\",\n          description: \"\",\n          image_url: \"\",\n          date_time: \"\",\n          location: \"\"\n        });\n        self.fetchMyEvents();\n      });\n    };\n\n    this.logout = e => {\n      e.preventDefault();\n      localStorage.removeItem(\"access_token\");\n      this.props.history.push(\"/login\");\n    };\n\n    this.deleteEvent = (e, id) => {\n      console.log(\"12\");\n      e.preventDefault();\n      const token = localStorage.getItem(\"access_token\");\n      axios.delete(\"http://localhost:3000/events/\".concat(id), {\n        headers: {\n          Authorization: token\n        }\n      }).then(res => {});\n      window.location.reload();\n    };\n\n    this.updateState = (e, id) => {\n      const events = this.state.events;\n      console.log(events);\n      const filterEvent = events.filter(event => event.id === id);\n      const updateEvent = filterEvent[0];\n      this.setState({\n        name: updateEvent.name,\n        location: updateEvent.location,\n        description: updateEvent.description,\n        image_url: updateEvent.image_url,\n        date_time: updateEvent.date_time,\n        update: true,\n        updateEventId: id\n      });\n    };\n\n    this.updateEvent = e => {\n      e.preventDefault();\n      const self = this;\n      const _this$state2 = this.state,\n            name = _this$state2.name,\n            location = _this$state2.location,\n            description = _this$state2.description,\n            image_url = _this$state2.image_url,\n            date_time = _this$state2.date_time,\n            updateEventId = _this$state2.updateEventId;\n      const token = localStorage.getItem(\"access_token\");\n      axios({\n        method: \"put\",\n        url: \"http://localhost:3000/events/\".concat(updateEventId),\n        data: {\n          name: name,\n          description: description,\n          location: location,\n          date_time: date_time,\n          image_url: image_url\n        },\n        headers: {\n          Authorization: token\n        }\n      }).then(function (response) {\n        self.setState({\n          name: \"\",\n          description: \"\",\n          image_url: \"\",\n          date_time: \"\",\n          location: \"\",\n          update: false\n        });\n        self.fetchMyEvents();\n      });\n    };\n\n    this.cancelUpdate = () => {\n      this.setState({\n        name: \"\",\n        description: \"\",\n        image_url: \"\",\n        date_time: \"\",\n        location: \"\",\n        update: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"access_token\");\n\n    if (!token) {\n      this.props.history.push(\"/login\");\n    } else {\n      this.fetchMyEvents();\n    }\n  }\n\n  render() {\n    const _this$state3 = this.state,\n          events = _this$state3.events,\n          name = _this$state3.name,\n          description = _this$state3.description,\n          date_time = _this$state3.date_time,\n          location = _this$state3.location,\n          image_url = _this$state3.image_url,\n          update = _this$state3.update,\n          user = _this$state3.user;\n    let myEvents = [];\n    myEvents = events.map((event, key) => React.createElement(React.Fragment, null, React.createElement(Event, {\n      name: event.name,\n      location: event.location,\n      description: event.description,\n      id: event.id,\n      isEdit: true,\n      deleteEvent: this.deleteEvent,\n      updateState: this.updateState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    })));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      logout: this.logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Welcome! \", user && user.username), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, user && user.primary_location), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"My events\"), myEvents ? myEvents : React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"No event yet\")), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, !update ? React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Create new one\") : React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Update form\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Name\",\n      name: \"name\",\n      value: name,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Location\",\n      name: \"location\",\n      value: location,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Time-date\",\n      name: \"date_time\",\n      value: date_time,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Description\",\n      name: \"description\",\n      value: description,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Image Url\",\n      name: \"image_url\",\n      value: image_url,\n      onChange: this.handlechange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    })), !update ? React.createElement(\"button\", {\n      className: \"btn btn-outline-success\",\n      onClick: this.createNewEvent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }, \"Create\") : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-outline-success\",\n      style: {\n        margin: \"1rem\"\n      },\n      onClick: this.updateEvent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \"Update\"), React.createElement(\"button\", {\n      className: \"btn btn-outline-success\",\n      onClick: this.cancelUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, \"cancel\")))), React.createElement(\"div\", {\n      className: \"col-sm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    })))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/Aaron/Development/event-project/events-frontend/src/components/profile.js"],"names":["React","Component","Navbar","navigate","axios","Event","Profile","state","events","name","description","image_url","date_time","location","update","user","ticketCounter","tickets","fetchMyEvents","token","localStorage","getItem","fetch","headers","Authorization","then","res","json","console","log","setState","getUser","handlechange","e","target","value","createNewEvent","preventDefault","self","method","body","response","logout","removeItem","props","history","push","deleteEvent","id","delete","window","reload","updateState","filterEvent","filter","event","updateEvent","updateEventId","url","data","cancelUpdate","componentDidMount","render","myEvents","map","key","username","primary_location","margin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Navbar from \"./navbar\";\nimport { navigate } from \"@reach/router\";\nimport axios from \"axios\";\nimport Event from \"./event\";\n\nexport default class Profile extends Component {\n  state = {\n    events: [],\n    name: \"\",\n    description: \"\",\n    image_url: \"\",\n    date_time: \"\",\n    location: \"\",\n    update: false,\n    user: {},\n    ticketCounter: 0,\n    tickets: {}\n  };\n  componentDidMount() {\n    const token = localStorage.getItem(\"access_token\");\n    if (!token) {\n      this.props.history.push(\"/login\");\n    } else {\n      this.fetchMyEvents();\n    }\n  }\n\n  fetchMyEvents = () => {\n    const token = localStorage.getItem(\"access_token\");\n\n    fetch(\"http://localhost:3000/events\", { headers: { Authorization: token } })\n      .then(res => res.json())\n      .then(res => {\n        console.log(res);\n        this.setState(\n          {\n            events: res\n          },\n          () => {\n            this.getUser();\n          }\n        );\n      });\n  };\n\n  handlechange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  getUser = () => {\n    const token = localStorage.getItem(\"access_token\");\n    fetch(`http://localhost:3000/user-info`, {\n      headers: { Authorization: token }\n    })\n      .then(res => res.json())\n      .then(res => {\n        console.log(res);\n        this.setState({\n          user: res\n        });\n      });\n  };\n\n  createNewEvent = e => {\n    e.preventDefault();\n    const { name, description, date_time, location, image_url } = this.state;\n    console.log(name, description, date_time, location, image_url);\n    const token = localStorage.getItem(\"access_token\");\n    console.log(token);\n    const self = this;\n    fetch(\"http://localhost:3000/events\", {\n      method: \"POST\",\n      body: {\n        name: name,\n        description: description,\n        location: location,\n        date_time: date_time,\n        image_url: image_url\n      },\n      headers: { Authorization: token }\n    }).then(function(response) {\n      self.setState({\n        name: \"\",\n        description: \"\",\n        image_url: \"\",\n        date_time: \"\",\n        location: \"\"\n      });\n      self.fetchMyEvents();\n    });\n  };\n\n  logout = e => {\n    e.preventDefault();\n    localStorage.removeItem(\"access_token\");\n    this.props.history.push(\"/login\");\n  };\n\n  deleteEvent = (e, id) => {\n    console.log(\"12\");\n    e.preventDefault();\n    const token = localStorage.getItem(\"access_token\");\n    axios\n      .delete(`http://localhost:3000/events/${id}`, {\n        headers: { Authorization: token }\n      })\n      .then(res => {});\n    window.location.reload();\n  };\n\n  updateState = (e, id) => {\n    const { events } = this.state;\n    console.log(events);\n    const filterEvent = events.filter(event => event.id === id);\n    const updateEvent = filterEvent[0];\n    this.setState({\n      name: updateEvent.name,\n      location: updateEvent.location,\n      description: updateEvent.description,\n      image_url: updateEvent.image_url,\n      date_time: updateEvent.date_time,\n      update: true,\n      updateEventId: id\n    });\n  };\n\n  updateEvent = e => {\n    e.preventDefault();\n    const self = this;\n    const {\n      name,\n      location,\n      description,\n      image_url,\n      date_time,\n      updateEventId\n    } = this.state;\n    const token = localStorage.getItem(\"access_token\");\n    axios({\n      method: \"put\",\n      url: `http://localhost:3000/events/${updateEventId}`,\n      data: {\n        name: name,\n        description: description,\n        location: location,\n        date_time: date_time,\n        image_url: image_url\n      },\n      headers: { Authorization: token }\n    }).then(function(response) {\n      self.setState({\n        name: \"\",\n        description: \"\",\n        image_url: \"\",\n        date_time: \"\",\n        location: \"\",\n        update: false\n      });\n      self.fetchMyEvents();\n    });\n  };\n\n  cancelUpdate = () => {\n    this.setState({\n      name: \"\",\n      description: \"\",\n      image_url: \"\",\n      date_time: \"\",\n      location: \"\",\n      update: false\n    });\n  };\n  render() {\n    const {\n      events,\n      name,\n      description,\n      date_time,\n      location,\n      image_url,\n      update,\n      user\n    } = this.state;\n    let myEvents = [];\n    myEvents = events.map((event, key) => (\n      <>\n        <Event\n          name={event.name}\n          location={event.location}\n          description={event.description}\n          id={event.id}\n          isEdit={true}\n          deleteEvent={this.deleteEvent}\n          updateState={this.updateState}\n        />\n        <br />\n      </>\n    ));\n    return (\n      <div>\n        <Navbar logout={this.logout} />\n        <br />\n        <br />\n\n        <div className=\"container\">\n          <h2>Welcome! {user && user.username}</h2>\n          <p>{user && user.primary_location}</p>\n          <hr />\n          <br />\n          <br />\n\n          <div className=\"row\">\n            <div className=\"col\">\n              <h3>My events</h3>\n              {myEvents ? myEvents : <h3>No event yet</h3>}\n            </div>\n            <div className=\"col\">\n              <div className=\"container\">\n                <div className=\"row\">\n                  <div className=\"col\">\n                    {!update ? <h3>Create new one</h3> : <h3>Update form</h3>}\n                    <br />\n                    <form>\n                      <div className=\"form-group\">\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          aria-describedby=\"emailHelp\"\n                          placeholder=\"Name\"\n                          name=\"name\"\n                          value={name}\n                          onChange={this.handlechange}\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          aria-describedby=\"emailHelp\"\n                          placeholder=\"Location\"\n                          name=\"location\"\n                          value={location}\n                          onChange={this.handlechange}\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          aria-describedby=\"emailHelp\"\n                          placeholder=\"Time-date\"\n                          name=\"date_time\"\n                          value={date_time}\n                          onChange={this.handlechange}\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          aria-describedby=\"emailHelp\"\n                          placeholder=\"Description\"\n                          name=\"description\"\n                          value={description}\n                          onChange={this.handlechange}\n                        />\n                      </div>\n                      <div className=\"form-group\">\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          aria-describedby=\"emailHelp\"\n                          placeholder=\"Image Url\"\n                          name=\"image_url\"\n                          value={image_url}\n                          onChange={this.handlechange}\n                        />\n                      </div>\n                      {!update ? (\n                        <button\n                          className=\"btn btn-outline-success\"\n                          onClick={this.createNewEvent}\n                        >\n                          Create\n                        </button>\n                      ) : (\n                        <span>\n                          <button\n                            className=\"btn btn-outline-success\"\n                            style={{ margin: \"1rem\" }}\n                            onClick={this.updateEvent}\n                          >\n                            Update\n                          </button>\n                          <button\n                            className=\"btn btn-outline-success\"\n                            onClick={this.cancelUpdate}\n                          >\n                            cancel\n                          </button>\n                        </span>\n                      )}\n                    </form>\n                  </div>\n                  <div className=\"col-sm\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}